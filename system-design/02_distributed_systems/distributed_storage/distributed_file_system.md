# 분산 파일 시스템 (Distributed File Systems)

> **목표:**  
> - 분산 파일 시스템의 개념과 핵심 원리를 학습한다.  
> - HDFS, Ceph, GlusterFS 등 다양한 분산 파일 시스템 기술을 이해한다.  
> - 확장성과 고가용성을 고려한 대용량 파일 저장 및 분석 시스템을 실무에 적용하는 방법을 연구한다.

---

## 1. 개념 개요

> **분산 파일 시스템은 여러 노드에 데이터를 분산 저장하여, 단일 서버의 저장 한계를 극복하고 고가용성, 확장성, 내구성을 제공하는 데이터 저장 솔루션이다.**

- **정의:**  
  - 분산 파일 시스템은 파일 데이터를 여러 서버(노드)에 분산하여 저장하고, 중앙 집중식 파일 시스템처럼 동작하도록 하는 시스템입니다.  
  - 데이터의 복제와 샤딩을 통해 고가용성과 내구성을 확보하며, 대규모 데이터를 효율적으로 처리할 수 있도록 설계됩니다.

- **왜 중요한가?**  
  - **대용량 데이터 처리:**  
    - 전통적인 파일 시스템의 용량과 처리 성능 한계를 극복하여, 수 페타바이트(PB) 이상의 데이터를 저장하고 분석할 수 있습니다.
  - **고가용성 및 장애 복구:**  
    - 데이터를 여러 노드에 복제하여 저장하므로, 특정 노드 장애 시에도 데이터 유실 없이 서비스가 지속될 수 있습니다.
  - **글로벌 분산:**  
    - 지리적으로 분산된 데이터 센터 간의 데이터 복제와 접근을 통해, 전 세계 사용자에게 빠른 데이터 서비스를 제공합니다.

- **어떤 문제를 해결하는가?**  
  - 단일 파일 서버의 저장 용량 및 처리량 한계를 극복  
  - 장애 발생 시 데이터 유실 및 서비스 중단 문제 해결  
  - 대규모 파일의 분산 저장과 효율적 데이터 접근 및 분석 지원

- **실무에서 어떻게 적용하는가?**  
  - **HDFS (Hadoop Distributed File System):**  
    - 빅데이터 분석 및 처리에 특화된 분산 파일 시스템으로, 데이터 노드와 네임 노드 구조를 통해 대규모 데이터를 효율적으로 관리합니다.
  - **Ceph:**  
    - 객체, 블록, 파일 스토리지 모두를 제공하는 통합 분산 스토리지 솔루션으로, 높은 확장성과 자가 치유(self-healing) 기능을 갖추고 있습니다.
  - **GlusterFS:**  
    - 소프트웨어 기반의 분산 파일 시스템으로, 간단한 구성과 유연한 확장성을 제공합니다.

---

## 2. 주요 구성 및 아키텍처

### 2.1 HDFS (Hadoop Distributed File System)
- **구성 요소:**  
  - **네임 노드(NameNode):**  
    - 파일 시스템의 메타데이터(파일 이름, 디렉터리 구조, 블록 위치 등)를 관리합니다.
  - **데이터 노드(DataNode):**  
    - 실제 파일 데이터를 블록 단위로 저장하며, 네임 노드의 명령에 따라 데이터를 읽거나 기록합니다.
- **특징:**  
  - 대규모 데이터 분산 저장에 최적화되어 있으며, 주로 배치 처리와 빅데이터 분석에서 사용됩니다.
  - 내구성을 위해 데이터 블록의 복제(replicas)를 관리합니다.

### 2.2 Ceph
- **구성 요소:**  
  - **Ceph OSD (Object Storage Daemon):**  
    - 실제 데이터 저장을 담당하며, 데이터 복제와 복구, 재균형(rebalancing)을 자동으로 처리합니다.
  - **Ceph Monitor:**  
    - 클러스터의 상태를 모니터링하고, 클라이언트에 대한 메타데이터 정보를 제공합니다.
  - **RADOS (Reliable Autonomic Distributed Object Store):**  
    - Ceph의 기본 분산 저장 계층으로, 객체 기반의 데이터를 신뢰성 있게 저장합니다.
- **특징:**  
  - 객체, 블록, 파일 스토리지 인터페이스를 모두 지원하며, 확장성과 자가 치유 기능이 뛰어납니다.
  - 높은 성능과 유연한 데이터 배포를 위해 CRUSH (Controlled Replication Under Scalable Hashing) 알고리즘을 사용합니다.

### 2.3 GlusterFS
- **구성 요소:**  
  - 여러 서버를 하나의 파일 시스템으로 통합하는 방식으로 동작하며, 스케일 아웃(scale-out) 아키텍처를 제공합니다.
- **특징:**  
  - 소프트웨어 정의 스토리지(SDS) 솔루션으로, 비교적 간단한 설치와 구성, 유연한 확장이 가능하며, 주로 중소규모 환경에 적합합니다.

---

## 3. 장단점 및 고려 사항

### 장점
- **확장성:**  
  - 수평 확장이 용이하여, 노드를 추가함으로써 저장 용량과 처리 능력을 쉽게 늘릴 수 있습니다.
- **고가용성 및 내구성:**  
  - 데이터 복제 및 자동 복구 기능을 통해, 일부 노드 장애에도 데이터가 보호됩니다.
- **대용량 데이터 처리:**  
  - 대규모 데이터셋의 저장 및 분산 처리에 최적화되어, 빅데이터 분석 및 클라우드 환경에 적합합니다.

### 단점
- **메타데이터 관리 복잡성:**  
  - 네임 노드(HDFS)와 같이 중앙 메타데이터 관리자가 단일 장애점이 될 수 있으며, 확장 시 성능 이슈가 발생할 수 있습니다.
- **운영 및 유지보수:**  
  - 클러스터 관리, 데이터 복제, 재균형 및 장애 복구 등의 운영 관리가 복잡할 수 있습니다.
- **데이터 접근 지연:**  
  - 데이터 분산 저장과 복제 과정으로 인한 읽기/쓰기 지연이 발생할 수 있습니다.

### 고려 사항
- **서비스 요구사항 분석:**  
  - 저장할 데이터의 크기, 접근 패턴, 내구성 요구사항을 면밀히 분석하여 적합한 분산 파일 시스템 솔루션을 선택합니다.
- **클러스터 구성 전략:**  
  - 노드 수, 복제 정책, 데이터 샤딩 전략 등을 신중하게 계획하여, 장애 발생 시 데이터 손실 없이 고가용성을 유지할 수 있도록 합니다.
- **운영 도구 및 모니터링:**  
  - 클러스터 상태, 데이터 복제 및 성능 모니터링을 위한 도구(Prometheus, Grafana 등)를 활용하여, 시스템의 안정적인 운영을 보장해야 합니다.

---

## 4. 실무 적용 사례

- **빅데이터 분석 환경 (HDFS):**  
  - Apache Hadoop 기반의 빅데이터 분석 플랫폼에서는 HDFS를 사용하여 대용량 데이터를 분산 저장하고, MapReduce 등의 분석 작업을 수행합니다.
  
- **글로벌 클라우드 서비스 (Ceph):**  
  - 클라우드 서비스 제공 업체나 기업에서 Ceph를 활용하여 객체, 블록, 파일 스토리지 기능을 통합 관리하며, 높은 확장성과 자가 치유 기능으로 안정성을 확보합니다.
  
- **중소규모 파일 공유 (GlusterFS):**  
  - 소규모 환경에서 비용 효율적으로 파일 공유 및 분산 저장을 필요로 할 때 GlusterFS를 활용하여, 간단한 설정과 유연한 확장을 실현합니다.

---

## 5. 추천 리소스

- 📖 _Designing Data-Intensive Applications_ - Martin Kleppmann  
- 📖 _Hadoop: The Definitive Guide_ - Tom White  
- 📖 _Ceph: The Definitive Guide_ - Katie Walters 외  
- 📌 [Apache HDFS Documentation](https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html)  
- 📌 [Ceph Documentation](https://docs.ceph.com/en/latest/)

---

## 6. 마무리

분산 파일 시스템은 대용량 데이터의 저장과 분석, 글로벌 서비스 운영에 필수적인 기술입니다.  
HDFS, Ceph, GlusterFS와 같은 솔루션은 각각의 특징과 강점을 가지고 있으며, 서비스의 요구사항에 따라 적절한 시스템을 선택하고 구성해야 합니다.  
이 문서를 통해 분산 파일 시스템의 기본 원리와 아키텍처, 그리고 실무 적용 전략을 명확히 이해하여, 실제 프로젝트 설계 시 참고할 수 있기를 바랍니다.