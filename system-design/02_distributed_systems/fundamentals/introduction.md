# 분산 시스템 개요

> **목표:**  
> - 여러 컴퓨터가 네트워크로 연결되어 하나의 통합 시스템처럼 동작하는 분산 시스템의 기본 개념을 이해한다.  
> - 분산 시스템이 왜 필요한지, 어떤 문제를 해결하는지, 그리고 실무에서 어떻게 적용되는지를 학습한다.  
> - 분산 시스템의 주요 특징과 설계 시 고려해야 할 사항들을 살펴본다.

---

## 1. 개념 개요

- **정의:**  
  분산 시스템은 여러 개의 독립적인 컴퓨터(노드)가 네트워크를 통해 서로 협력하며 하나의 통합 시스템처럼 기능하도록 구성된 아키텍처입니다.

- **왜 중요한가?**  
  - **확장성:** 단일 서버의 한계를 극복하고, 필요에 따라 노드를 추가하여 시스템 전체의 처리 능력을 확장할 수 있습니다.  
  - **가용성:** 여러 노드가 분산되어 있으므로, 일부 노드에 장애가 발생해도 전체 시스템은 계속 동작할 수 있습니다.  
  - **신뢰성 및 장애 복구:** 데이터 복제, 페일오버, 로드 밸런싱 등 다양한 전략을 통해 장애 발생 시에도 안정적인 서비스 제공이 가능합니다.

- **어떤 문제를 해결하는가?**  
  - **중앙 집중식 시스템의 병목현상:** 단일 서버에 의존하지 않고 작업을 분산 처리하여 병목 문제를 완화합니다.  
  - **데이터 일관성과 장애:** 노드 간 데이터 복제 및 통신을 통해 장애 발생 시 데이터 손실 및 불일관성을 최소화합니다.  
  - **글로벌 서비스 운영:** 전 세계 여러 지역에 분산된 노드를 통해 사용자에게 빠르고 안정적인 서비스를 제공합니다.

- **실무에서 어떻게 적용하는가?**  
  - **클라우드 기반 서비스:** AWS, Google Cloud, Azure 등에서 분산 시스템을 통해 대규모 트래픽을 처리합니다.  
  - **데이터베이스 시스템:** Google Spanner, Amazon DynamoDB 등은 분산 환경에서 데이터 일관성을 유지하며 확장성을 보장합니다.  
  - **마이크로서비스 아키텍처:** 각 서비스가 독립적으로 배포되고 확장되는 분산 시스템 형태로 운영되어, 높은 가용성과 유지보수성을 확보합니다.

---

## 2. 실무 적용 사례

- **Google Spanner:**  
  - 전 세계에 분산된 노드를 통해 데이터 일관성을 유지하며, 강력한 확장성과 신뢰성을 제공하는 분산 데이터베이스입니다.

- **Amazon DynamoDB:**  
  - 최종적 일관성을 적용해 높은 처리량과 확장성을 보장하는 NoSQL 데이터베이스로, 글로벌 분산 시스템의 대표적인 사례입니다.

- **Netflix:**  
  - 클라우드 네이티브 분산 아키텍처를 도입하여, 사용자 수 증가와 장애 상황에서도 안정적인 스트리밍 서비스를 제공합니다.

---

## 3. 구현 방법 (예제)

분산 시스템은 일반적으로 여러 서버 간의 통신과 데이터 동기화를 포함합니다. 아래는 Node.js를 사용하여 간단한 분산 메시징 시뮬레이션을 구현한 예시입니다.

> **주의:**  
> 실제 분산 시스템은 복잡한 네트워크 프로토콜, 데이터 일관성 보장, 장애 복구 전략 등이 필요하지만, 여기서는 개념 이해를 돕기 위한 단순한 예시로 참고합니다.

### 3.1 예제: 간단한 메시지 브로커 시뮬레이션

```javascript
// node.js (예: distributed_simulation.js)
const express = require('express');
const axios = require('axios');

const app = express();
app.use(express.json());

// 각 노드(서버)가 자신만의 메시지 큐를 가지고 있다고 가정
let messageQueue = [];

// 메시지를 받으면 큐에 저장하고, 처리 결과를 반환하는 엔드포인트
app.post('/receive', (req, res) => {
  const { message } = req.body;
  messageQueue.push(message);
  console.log(`메시지 수신: ${message}`);
  res.send({ status: '메시지 수신됨', queueLength: messageQueue.length });
});

// 특정 노드에 메시지를 전달하는 클라이언트 역할 함수 (분산 시스템 내 통신)
async function sendMessageToNode(nodeUrl, message) {
  try {
    const response = await axios.post(`${nodeUrl}/receive`, { message });
    console.log(`노드 응답:`, response.data);
  } catch (error) {
    console.error(`노드 전송 실패: ${nodeUrl}`, error.message);
  }
}

// 서버 시작
const PORT = process.env.PORT || 3000;
app.listen(PORT, () => {
  console.log(`분산 시스템 노드가 포트 ${PORT}에서 실행 중...`);
});

// 예시: 다른 노드로 메시지 전송 (실제 환경에서는 여러 노드의 URL을 사용)
if (process.env.SEND_TEST_MESSAGE === 'true') {
  sendMessageToNode('http://localhost:3001', 'Hello, Distributed World!');
}
```

- **구현 포인트:**  
  - **노드 간 통신:** 간단한 REST API를 활용하여 메시지를 전송하고 수신하는 과정을 구현했습니다.  
  - **메시지 큐:** 각 노드는 자체 큐에 메시지를 저장하고, 이후 처리할 수 있는 기반을 마련합니다.  
  - **에러 처리:** 통신 실패 시 오류 메시지를 출력하여, 장애 상황에 대한 기본적인 대응을 시뮬레이션합니다.

---

## 4. 장단점 및 고려 사항

### 장점
- **확장성:**  
  - 필요에 따라 노드를 추가하여 전체 처리 능력을 확장할 수 있습니다.
  
- **가용성:**  
  - 일부 노드에 장애가 발생해도 전체 시스템이 계속 동작할 수 있습니다.
  
- **장애 복구:**  
  - 데이터 복제 및 페일오버 전략을 통해 장애 발생 시 신속하게 복구할 수 있습니다.

### 단점
- **복잡성 증가:**  
  - 여러 노드 간의 통신, 데이터 일관성 유지, 장애 복구 등 관리해야 할 요소가 많아집니다.
  
- **네트워크 지연:**  
  - 노드 간의 통신으로 인한 응답 지연이 발생할 수 있습니다.
  
- **데이터 일관성 문제:**  
  - 분산 환경에서 데이터 동기화 및 일관성 보장이 어려울 수 있습니다.

### 추가 고려 사항
- **보안:**  
  - 노드 간의 안전한 통신(암호화, 인증) 및 데이터 보호 전략 필요.
  
- **운영 및 모니터링:**  
  - 장애 감지, 로깅, 모니터링 시스템 구축을 통해 실시간 상태 확인 및 대응.
  
- **테스트 전략:**  
  - 단위 테스트, 통합 테스트, 시뮬레이션을 통해 각 구성 요소의 신뢰성 및 전체 시스템의 안정성 검증.

---

## 5. 참고 자료

- [Designing Data-Intensive Applications](https://dataintensive.net/) - Martin Kleppmann  
- [Distributed Systems: Principles and Paradigms](https://www.distributed-systems.net/) - Andrew S. Tanenbaum  
- [Site Reliability Engineering](https://sre.google/) - Google SRE 팀  
- [CAP Theorem Explained](https://www.scnsoft.com/blog/cap-theorem)

---

## 마무리

분산 시스템 개요 문서는 **여러 컴퓨터가 협력하여 하나의 시스템처럼 동작**하는 분산 시스템의 기본 개념을 이해하는 데 중점을 둡니다.  
이 문서를 통해 분산 시스템의 필요성, 해결하는 문제, 그리고 실무에서의 적용 사례를 학습하고, 간단한 시뮬레이션 예제를 통해 개념을 코드로 구현해보았습니다.  
실제 시스템 설계 및 구현 시에는 성능, 보안, 운영 및 모니터링 등 다양한 추가 고려사항을 함께 반영해야 합니다.