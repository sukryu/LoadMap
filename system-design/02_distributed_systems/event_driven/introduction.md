# 이벤트 기반 아키텍처 (event_driven)

> **목표:**  
> - 이벤트 기반(Event-Driven) 아키텍처의 개념과 핵심 원리를 학습한다.  
> - 메시지 큐, 이벤트 소싱, CQRS 패턴을 활용한 비동기 시스템 설계를 이해한다.  
> - 확장성과 가용성을 고려한 이벤트 중심 아키텍처를 실무에 적용하는 방법을 연구한다.

---

## 1. 개념 개요

> **이벤트 기반 아키텍처는 시스템 구성 요소 간의 비동기 이벤트를 통해 상태를 변경하고 통신하는 방식이다.**

- **왜 중요한가?**  
  - 마이크로서비스 간의 통합 및 느슨한 결합(loose coupling)을 실현하여, 개별 서비스의 독립성과 확장성을 보장합니다.  
  - 비동기 메시지 전달 방식을 활용함으로써, 시스템의 응답성과 성능을 높이고, 트래픽 피크 시에도 유연하게 대응할 수 있습니다.  
  - 결제, 주문 처리, 로그 처리 등 고가용성을 요구하는 서비스에서 신뢰성 있는 이벤트 처리를 지원합니다.

- **어떤 문제를 해결하는가?**  
  - 동기 요청-응답 모델의 확장성 한계를 극복하고, 서비스 간의 직접적인 의존성을 줄여 유지보수를 용이하게 합니다.  
  - 이벤트 로그를 기반으로 데이터 변경 이력을 기록하여, 나중에 데이터 정합성을 복원하거나 감사(audit)를 수행할 수 있습니다.  
  - 비동기 처리로 인해 발생할 수 있는 지연이나 장애를 효과적으로 관리할 수 있습니다.

- **실무에서 어떻게 적용하는가?**  
  - **메시지 큐(Kafka, RabbitMQ, Amazon SQS):**  
    - 서비스 간 비동기 통신을 위한 중개 역할을 하여, 이벤트 전달 및 내구성을 보장합니다.
  - **이벤트 소싱(Event Sourcing):**  
    - 모든 상태 변경을 이벤트 로그로 기록하여, 변경 이력을 추적하고 필요 시 상태를 재구성(Rebuild)할 수 있습니다.
  - **CQRS 패턴 (Command Query Responsibility Segregation):**  
    - 읽기와 쓰기 작업을 분리하여, 읽기 성능을 최적화하고 복잡한 비즈니스 로직 처리를 단순화합니다.

---

## 2. 학습 내용

### 주요 학습 주제

- **이벤트 기반 아키텍처 개요 (introduction.md)**
  - 이벤트의 정의, 발생 및 전파 방식
  - 이벤트 기반 설계의 주요 장점(유연성, 확장성, 고가용성)과 단점(복잡성, 이벤트 순서 보장 문제)

- **메시지 큐 (message_queues.md)**
  - Apache Kafka, RabbitMQ, Amazon SQS 등의 비교 분석
  - 메시지 브로커의 역할, 메시지 내구성, 재시도 메커니즘 및 이벤트 처리 흐름

- **이벤트 소싱 (event_sourcing.md)**
  - 전통적인 CRUD 방식과의 차이점 및 이벤트 소싱의 장점
  - 이벤트 로그 저장, 이벤트 재생(Replaying Events)을 통한 상태 복원 전략

- **CQRS 패턴 (cqrs_pattern.md)**
  - 명령(Command)과 조회(Query)의 역할 분리
  - 읽기 성능 최적화 및 복잡한 도메인 로직 구현에의 활용 방안
  - 이벤트 소싱과의 결합 사례 분석

- **실무에서의 이벤트 기반 아키텍처 적용 (event_driven_in_practice.md)**
  - 이벤트 기반 시스템 설계 시 고려할 사항(이벤트 순서, 중복 처리, 데이터 일관성 등)
  - Kafka Streams, Apache Flink 등 실시간 데이터 처리 기술을 활용한 사례
  - 실제 프로젝트에서의 이벤트 기반 아키텍처 도입 전략 및 운영 방안

---

## 3. 실전 사례 분석

> **대규모 서비스에서 이벤트 기반 아키텍처가 어떻게 활용되는가?**

- **Uber:**  
  - Apache Kafka를 활용하여 실시간 차량 배차, 위치 업데이트, 이벤트 처리를 통해 빠르고 유연한 시스템을 구현합니다.

- **Netflix:**  
  - 마이크로서비스 간 비동기 이벤트 기반 통신을 통해 서비스 확장성과 장애 대응력을 강화하였으며, 데이터 파이프라인과 로그 처리 시스템에 이벤트 기반 아키텍처를 적용하고 있습니다.

- **Amazon:**  
  - Amazon SQS와 AWS Lambda를 이용하여 서버리스 환경에서 이벤트를 처리하며, 주문 처리 및 알림 서비스 등에서 높은 가용성과 자동 확장 기능을 활용합니다.

---

## 4. 학습 방법

1. **개념 이론 학습:**  
   - 각 Markdown 파일(introduction.md, message_queues.md, event_sourcing.md, cqrs_pattern.md, event_driven_in_practice.md)을 정독하며 이벤트 기반 아키텍처의 원리와 특징을 이해합니다.

2. **메시지 큐 및 이벤트 소싱 실습:**  
   - Kafka나 RabbitMQ를 사용한 간단한 이벤트 발행 및 구독 예제를 구현해보고, 이벤트 소싱을 적용하여 상태 재구성 과정을 실습합니다.

3. **CQRS 패턴 적용 사례 분석:**  
   - 실제 시스템에서 명령과 조회를 분리한 CQRS 구현 사례를 분석하고, 이벤트 소싱과 결합한 디자인을 검토합니다.

4. **이벤트 기반 아키텍처 설계 실습:**  
   - 실무 요구사항에 맞추어, 이벤트 중복 처리, 순서 보장, 내구성, 확장성을 고려한 아키텍처 설계 및 코드 구현을 진행합니다.

---

## 5. 추천 리소스

- 📖 _Designing Event-Driven Systems_ - Ben Stopford  
- 📖 _Building Event-Driven Microservices_ - Adam Bellemare  
- 📖 _Kafka: The Definitive Guide_ - Neha Narkhede 외  
- 📌 [Event Sourcing Explained](https://martinfowler.com/eaaDev/EventSourcing.html)  
- 📌 [CQRS and Event Sourcing](https://microservices.io/patterns/data/cqrs.html)

---

## 6. 마무리

이 문서는 **이벤트 기반 아키텍처**의 핵심 개념과 실무 적용 방법을 체계적으로 학습하는 단계를 제시합니다.  
이론 학습, 메시지 큐 및 이벤트 소싱 실습, CQRS 적용 사례 분석, 그리고 이벤트 기반 아키텍처 설계 실습의 과정을 통해, 확장성과 성능을 고려한 비동기 시스템을 효과적으로 구축할 수 있습니다.  
실무에서 이벤트 기반 아키텍처를 적용할 때 고려해야 할 사항들과 트레이드오프를 명확하게 이해하여, 안정적이고 확장성 있는 시스템 설계를 도모하시길 바랍니다.