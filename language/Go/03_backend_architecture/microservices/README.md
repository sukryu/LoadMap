# Microservices Architecture in Go 🏗️

이 디렉토리는 **마이크로서비스 아키텍처**에 대한 개념과 실무 적용 방법을 다룹니다.  
여기서는 단일 모놀리식 애플리케이션을 여러 개의 독립된 서비스로 분리하는 설계 원칙, 서비스 간 통신 패턴, API 게이트웨이, 서비스 디스커버리, 그리고 장애 격리와 확장성을 확보하는 다양한 전략에 대해 학습할 수 있습니다.

---

## What You'll Learn 🎯

- **마이크로서비스 기본 개념**:  
  - 마이크로서비스의 정의, 장점, 그리고 단점  
  - 모놀리식 아키텍처와의 차이점 및 전환 시 고려사항

- **핵심 아키텍처 패턴**:  
  - API 게이트웨이, 서비스 디스커버리, 분산 트레이싱, 로깅 및 모니터링  
  - 데이터 일관성(강한 일관성 vs. eventual consistency) 및 장애 격리 전략

- **Go를 활용한 실무 적용**:  
  - Go 기반 마이크로서비스 프레임워크(예: Go kit, Micro 등)를 사용한 서비스 분리 및 통신 구현
  - 컨테이너 및 Kubernetes를 활용한 배포 및 확장 전략

---

## Microservices Overview

### 1. 마이크로서비스란?
마이크로서비스 아키텍처는 애플리케이션을 작고 독립적인 서비스 단위로 분리하여, 각 서비스가 특정 도메인 또는 비즈니스 기능을 담당하도록 설계하는 방식입니다.  
이 접근법은 다음과 같은 이점을 제공합니다:
- **유연성**: 서비스별로 독립적인 개발, 배포 및 확장이 가능
- **탄력성**: 한 서비스의 장애가 전체 시스템에 영향을 주지 않음
- **기술 다양성**: 각 서비스에 최적화된 기술 스택 선택 가능
- **팀 자율성**: 서비스 단위로 팀을 구성해 병렬 개발 및 운영이 용이

### 2. 왜 마이크로서비스를 채택해야 할까?
- **스케일 아웃**: 서비스 별로 필요한 부분만 확장할 수 있어 효율적
- **개발 및 배포의 독립성**: 서비스가 독립적으로 업데이트되므로, 전체 시스템 중단 없이 개선 가능
- **유지보수 및 장애 격리**: 문제 발생 시 특정 서비스에만 집중하여 빠르게 복구 가능

---

## Architectural Patterns & Practical Implementation

### 1. 핵심 패턴
- **API 게이트웨이**:  
  - 클라이언트 요청을 단일 진입점에서 받아 각 서비스로 라우팅  
  - 인증, 로깅, 요청 제한(rate limiting) 등을 중앙 집중식으로 관리

- **서비스 디스커버리**:  
  - 각 서비스가 동적으로 등록되고, 클라이언트는 이를 통해 서비스 위치를 파악  
  - Consul, Eureka, Kubernetes 내장 DNS 등을 활용

- **비동기 메시징**:  
  - Kafka, RabbitMQ 등의 메시지 브로커를 활용하여, 서비스 간 비동기 통신 및 이벤트 스트리밍 구현

- **분산 트레이싱 & 로깅**:  
  - OpenTelemetry, Jaeger 등을 통해 서비스 간 호출 흐름과 병목 현상을 추적

### 2. Go 기반 마이크로서비스 구현
- **Go Kit & Micro**:  
  - Go Kit은 마이크로서비스 패턴(예: 서비스 인터페이스, 미들웨어, 로깅, 추적)을 구현하기 위한 툴킷입니다.
  - Micro는 마이크로서비스 개발을 위한 프레임워크로, 서비스 등록, 디스커버리, RPC, 이벤트 등을 내장합니다.

- **컨테이너 및 Kubernetes 활용**:  
  - 각 마이크로서비스를 Docker 컨테이너로 패키징하고, Kubernetes를 사용하여 자동 배포, 스케일링, 장애 복구 등을 구현할 수 있습니다.

---

## 실무 활용 사례 🚀

1. **API 게이트웨이를 통한 통합 진입점 구성**  
   - 클라이언트가 단일 엔드포인트에 요청을 보내면, API 게이트웨이가 적절한 마이크로서비스로 요청을 라우팅합니다.
   - 인증, 요청 제한, 캐싱 등의 공통 기능을 API 게이트웨이에서 처리하여 각 서비스의 부담을 줄입니다.

2. **서비스 디스커버리 및 로드 밸런싱**  
   - Kubernetes의 내장 DNS나 Consul을 활용하여, 동적으로 변경되는 서비스 주소를 자동으로 감지합니다.
   - 클라이언트는 서비스 디스커버리를 통해 최신 엔드포인트로 요청을 전달받아, 부하 분산 및 장애 대비가 가능합니다.

3. **비동기 이벤트 처리**  
   - Kafka나 RabbitMQ를 이용해 주문 처리, 로그 집계, 사용자 알림 등 비동기 작업을 처리합니다.
   - 이벤트 소싱 및 CQRS 패턴을 도입해, 데이터 변경 사항을 이벤트로 기록하고 읽기 전용 뷰를 구성할 수 있습니다.

---

## Best Practices & Tips 💡

- **서비스 분리**:  
  - 각 서비스의 경계를 명확히 하여, 서비스 간 결합도를 낮추고 독립적으로 배포할 수 있도록 설계하세요.
  
- **데이터 관리 전략**:  
  - 데이터 일관성을 유지하기 위해, 각 서비스의 데이터 저장소를 분리하거나, 분산 트랜잭션 대신 eventual consistency를 적용하세요.
  
- **모니터링 및 로깅**:  
  - 모든 서비스에 공통된 로깅 및 추적 시스템을 구축하여, 장애 발생 시 전체적인 흐름을 쉽게 파악할 수 있도록 하세요.
  
- **API 게이트웨이 활용**:  
  - API 게이트웨이를 통해 보안, 인증, 캐싱, 로깅 등을 중앙 집중식으로 관리하면, 개별 서비스의 복잡도를 줄일 수 있습니다.
  
- **테스트와 배포 자동화**:  
  - 각 마이크로서비스에 대해 단위 테스트와 통합 테스트를 수행하고, CI/CD 파이프라인을 구축해 자동 배포를 실현하세요.

---

## 시작하기 🚀

### 1. 프로젝트 클론 및 디렉토리 이동
```bash
git clone https://github.com/your-username/go-backend-roadmap.git
cd go-backend-roadmap/03-backend-architecture/microservices
```

### 2. 실습 예제 실행
- 각 마이크로서비스의 예제 코드는 해당 하위 디렉토리에 포함되어 있습니다.  
- 예제 코드를 실행하여, 서비스 간 통신, API 게이트웨이 구성, 그리고 메시징 시스템 연계를 실습해 보세요.

---

## 참고 자료 📚

- [Microservices Patterns - Martin Fowler](https://martinfowler.com/articles/microservices.html)
- [Go Kit Documentation](https://gokit.io/)
- [Micro - A Microservices Toolkit](https://micro.mu/)
- [API Gateway Pattern](https://microservices.io/patterns/apigateway.html)
- [Service Discovery in Kubernetes](https://kubernetes.io/docs/concepts/services-networking/service/)

---

마이크로서비스 아키텍처는 대규모 시스템에서 확장성과 유연성을 극대화하는 강력한 설계 방식입니다.  
이 자료를 바탕으로 Go 기반 마이크로서비스를 설계하고, 실제 서비스에 적용해 보세요! Happy Microservices Building! 🚀