# 분산 작업 큐 시스템 프로젝트

## 프로젝트 개요
이 프로젝트는 Erlang/OTP의 동시성, 분산 처리, 및 오류 복구 메커니즘을 활용하여 **분산 작업 큐 시스템**을 구현한 예제입니다.  
본 시스템은 다양한 작업을 여러 작업자(Worker) 프로세스에 분배하여 병렬로 처리하며, 작업 실패 시 자동 재시작 및 오류 복구 기능을 제공합니다.

## 주요 기능
- **작업 분배 및 병렬 처리:**  
  중앙 작업 큐를 통해 다수의 작업을 여러 작업자에게 분산하여 동시에 처리합니다.
- **동적 작업자 관리:**  
  작업자 프로세스를 동적으로 생성 및 관리하며, 필요 시 자동으로 재시작하여 시스템의 안정성을 유지합니다.
- **오류 복구:**  
  작업 처리 중 오류가 발생하면 Supervisor가 자동으로 작업자 프로세스를 재시작하여 작업을 다시 시도합니다.
- **분산 환경 지원:**  
  여러 노드에 걸쳐 작업 큐를 분산 배포하여, 고부하 상황에서도 안정적인 작업 처리 성능을 제공합니다.

## 시스템 아키텍처
이 시스템은 OTP의 핵심 구성 요소들을 활용하여 다음과 같이 구성됩니다.

### 프로세스 구조
- **작업 큐 서버 (Task Queue Server):**  
  클라이언트로부터 작업 요청을 수신하고, 대기 중인 작업들을 적절한 작업자(Worker) 프로세스에 분배합니다.
- **작업자 (Worker) 프로세스:**  
  분배된 작업을 수행하며, 완료된 결과를 보고하거나 별도의 결과 저장소에 기록합니다.
- **Supervisor 트리:**  
  작업 큐 서버와 작업자 프로세스의 생명주기를 관리하며, 오류 발생 시 자동 복구 및 재시작을 수행합니다.

### OTP 구성 요소 활용
- **gen_server:**  
  작업 큐 서버와 작업자 프로세스의 상태 관리 및 메시지 처리를 위한 서버 로직을 구현합니다.
- **supervisor:**  
  프로세스의 장애를 감시하고, 실패 시 자동으로 재시작하는 기능을 제공합니다.
- **분산 처리:**  
  Erlang의 분산 기능을 활용하여, 여러 노드에 걸친 작업 분배 및 처리 기능을 구현합니다.

## 설치 및 실행 방법

### 요구 사항
- Erlang/OTP 24 이상
- Linux, macOS 또는 Windows 운영체제
- 터미널 또는 명령 프롬프트 환경

### 설치 방법

1. **Erlang/OTP 설치**
   - **Ubuntu/Debian:**
     ```bash
     sudo apt-get update
     sudo apt-get install erlang
     ```
   - **macOS:**
     ```bash
     brew install erlang
     ```
   - **Windows:**
     - Erlang 공식 웹사이트에서 인스톨러를 다운로드하거나, Chocolatey를 통해 설치:
       ```bash
       choco install erlang
       ```

2. **프로젝트 클론**
   ```bash
   git clone https://github.com/your-repo/distributed-task-queue.git
   cd distributed-task-queue
   ```

3. **컴파일**
   - `src` 디렉토리에 있는 Erlang 소스 파일들을 컴파일하여 `ebin` 디렉토리에 출력합니다.
     ```bash
     erlc -o ebin src/*.erl
     ```

### 실행 방법

1. **Erlang 쉘 시작**
   ```bash
   erl -pa ebin
   ```

2. **작업 큐 서버 시작**
   - Erlang 쉘에서 작업 큐 서버를 시작합니다.
     ```erlang
     distributed_task_queue:start().
     ```
   - 서버는 클라이언트로부터 작업 요청을 기다리며, 작업자에게 작업을 분배할 준비를 합니다.

3. **작업 요청 전송**
   - 별도의 터미널 또는 클라이언트 모듈을 사용하여 작업 요청을 큐에 추가합니다.
     ```erlang
     distributed_task_queue:submit_task(TaskData).
     ```
   - 작업 데이터는 문자열, 튜플 등 다양한 형태로 전송할 수 있으며, 작업자 프로세스가 이를 받아 처리합니다.

4. **작업 처리 및 결과 확인**
   - 작업자 프로세스는 분배된 작업을 처리하고, 완료된 결과를 로그 또는 별도의 메시지로 확인할 수 있습니다.

## 코드 구조

- **src/distributed_task_queue.erl:**  
  작업 큐 서버의 핵심 로직을 담고 있는 모듈로, 작업 요청 수신, 작업 분배, 작업자 관리 등의 기능을 구현합니다.
  
- **src/task_worker.erl:**  
  작업자 프로세스의 동작을 정의하는 모듈로, 개별 작업 처리 로직을 구현하며, 작업 완료 후 결과를 보고합니다.
  
- **src/supervisor_task.erl:**  
  Supervisor 트리 구성을 통해 작업 큐 서버와 작업자 프로세스의 생명주기를 관리합니다.
  
- **README.md:**  
  이 문서로, 프로젝트 개요와 실행 방법, 아키텍처 등을 상세히 설명합니다.

## 예제 사용 시나리오
1. **서버 시작:**  
   작업 큐 서버를 실행하여 작업 요청을 대기합니다.
2. **작업 제출:**  
   클라이언트가 작업 요청을 제출하면, 서버는 이를 대기열에 추가합니다.
3. **작업 분배:**  
   작업 큐 서버는 대기 중인 작업을 적절한 작업자 프로세스에 분배합니다.
4. **작업 처리:**  
   각 작업자 프로세스는 분배된 작업을 처리하고, 완료된 결과를 기록하거나 상위 시스템에 보고합니다.
5. **오류 복구:**  
   작업자 프로세스가 실패하는 경우, Supervisor가 자동으로 재시작하여 작업 중단 없이 시스템이 운영됩니다.

## 개발 및 테스트
- **개발 환경:**  
  Erlang/OTP R24 이상, VSCode 또는 기타 Erlang 지원 IDE
- **테스트:**  
  각 모듈에 대해 단위 테스트 및 통합 테스트를 수행하여 시스템의 안정성을 확인합니다.

## 확장 계획
- **분산 처리 확장:**  
  여러 노드를 연결하여 작업 큐 서버의 부하 분산 및 처리 능력을 확장합니다.
- **결과 저장소 통합:**  
  처리된 작업 결과를 데이터베이스나 파일 시스템에 저장하는 기능을 추가합니다.
- **웹 인터페이스:**  
  작업 요청 및 결과 모니터링을 위한 웹 기반 인터페이스 도입을 검토합니다.
- **보안 강화:**  
  작업 요청 인증 및 전송 데이터 암호화 등 보안 기능을 강화합니다.

## 참고 자료
- [Programming Erlang - Joe Armstrong](https://pragprog.com/titles/jjoe/programming-erlang/)
- [Learn You Some Erlang for Great Good! - Fred Hebert](http://learnyousomeerlang.com/)
- [Erlang 공식 문서](https://www.erlang.org/docs)

---

이 프로젝트는 OTP의 고급 기능과 분산 처리 모델을 실전에서 경험할 수 있는 훌륭한 예제입니다.  
의견이나 개선 사항은 [이슈 트래커](https://github.com/your-repo/distributed-task-queue/issues)를 통해 공유해 주시기 바랍니다.

Happy coding!