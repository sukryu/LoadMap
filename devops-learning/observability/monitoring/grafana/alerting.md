# ğŸ”” Grafana ì•Œë¦¼(Alerting) ì„¤ì • ê°€ì´ë“œ

> **ëª©í‘œ:**  
> - Grafanaì˜ ì•Œë¦¼ ì‹œìŠ¤í…œ êµ¬ì¡°ì™€ ì‘ë™ ì›ë¦¬ë¥¼ ì´í•´í•œë‹¤.
> - íš¨ê³¼ì ì¸ ì•Œë¦¼ ê·œì¹™ ì„¤ì • ë°©ë²•ì„ í•™ìŠµí•œë‹¤.
> - ì•Œë¦¼ ì±„ë„ êµ¬ì„±ê³¼ í†µí•© ë°©ë²•ì„ ìŠµë“í•œë‹¤.
> - ì•Œë¦¼ ì‹œìŠ¤í…œì˜ ìš´ì˜ê³¼ ê´€ë¦¬ ë°©ë²•ì„ íŒŒì•…í•œë‹¤.

---

## 1. Grafana ì•Œë¦¼ ì‹œìŠ¤í…œ ê°œìš”

Grafanaì˜ ì•Œë¦¼ ì‹œìŠ¤í…œì€ ì‹œìŠ¤í…œ ìƒíƒœë¥¼ ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§í•˜ê³ , ì„¤ì •ëœ ì¡°ê±´ì´ ì¶©ì¡±ë  ë•Œ ì ì ˆí•œ ì•Œë¦¼ì„ ë°œì†¡í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‹œìŠ¤í…œ ê´€ë¦¬ìëŠ” ë¬¸ì œ ìƒí™©ì„ ì‹ ì†í•˜ê²Œ ì¸ì§€í•˜ê³  ëŒ€ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì•Œë¦¼ ì‹œìŠ¤í…œì€ í¬ê²Œ ì•Œë¦¼ ê·œì¹™(Alert Rules), ì•Œë¦¼ ê·¸ë£¹(Alert Groups), ì•Œë¦¼ ì±„ë„(Notification Channels)ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ê° êµ¬ì„± ìš”ì†ŒëŠ” ì„œë¡œ ìœ ê¸°ì ìœ¼ë¡œ ì—°ê²°ë˜ì–´ íš¨ê³¼ì ì¸ ëª¨ë‹ˆí„°ë§ í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤.

## 2. ì•Œë¦¼ ê·œì¹™ ì„¤ì •

### ê¸°ë³¸ ì•Œë¦¼ ê·œì¹™ ìƒì„±

ì•Œë¦¼ ê·œì¹™ì€ ë‹¤ìŒê³¼ ê°™ì€ ìš”ì†Œë“¤ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

```yaml
alert_rule:
  name: CPU Usage Alert
  evaluation_interval: 1m
  condition: avg_over_time(node_cpu_seconds_total{mode="user"}[5m]) > 0.8
  duration: 5m
  severity: critical
```

### ì¡°ê±´ì‹ ì‘ì„± ì˜ˆì‹œ

ì‹œìŠ¤í…œ ìƒíƒœì— ë”°ë¥¸ ë‹¤ì–‘í•œ ì¡°ê±´ì‹ ì˜ˆì‹œì…ë‹ˆë‹¤:

```sql
# CPU ì‚¬ìš©ë¥  80% ì´ìƒ
avg(rate(node_cpu_seconds_total{mode="user"}[5m])) * 100 > 80

# ë©”ëª¨ë¦¬ ì‚¬ìš©ë¥  90% ì´ìƒ
(node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes) / node_memory_MemTotal_bytes * 100 > 90

# ë””ìŠ¤í¬ ì—¬ìœ  ê³µê°„ 10% ë¯¸ë§Œ
(node_filesystem_free_bytes / node_filesystem_size_bytes) * 100 < 10
```

## 3. ì•Œë¦¼ ì±„ë„ êµ¬ì„±

### ì´ë©”ì¼ ì•Œë¦¼ ì„¤ì •

ì´ë©”ì¼ì„ í†µí•œ ì•Œë¦¼ ë°œì†¡ì„ ìœ„í•œ êµ¬ì„± ë°©ë²•ì…ë‹ˆë‹¤:

```yaml
email_settings:
  smtp_server: smtp.company.com
  port: 587
  auth_method: STARTTLS
  username: alerts@company.com
  password: your_secure_password
```

### Slack í†µí•© ì„¤ì •

Slackì„ í†µí•œ ì•Œë¦¼ ë°œì†¡ì„ ìœ„í•œ ì„¤ì •ì…ë‹ˆë‹¤:

```yaml
slack_settings:
  webhook_url: https://hooks.slack.com/services/...
  channel: "#monitoring-alerts"
  username: Grafana Alert
  message_format:
    title: "[${severity}] ${alert_name}"
    content: "Metric value and threshold information"
```

## 4. ì•Œë¦¼ ê·¸ë£¹í™” ë° ë¼ìš°íŒ…

### ì•Œë¦¼ ê·¸ë£¹ ì„¤ì •

ì•Œë¦¼ì„ íš¨ê³¼ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ê·¸ë£¹í™” ì „ëµì…ë‹ˆë‹¤:

```yaml
alert_groups:
  infrastructure:
    target: system_admins
    channel: "#infra-alerts"
  application:
    target: dev_team
    channel: "#app-alerts"
  emergency:
    target: ops_team
    channels: 
      - email
      - sms
      - slack
```

### ì•Œë¦¼ ë¼ìš°íŒ… ê·œì¹™

ì•Œë¦¼ì˜ íŠ¹ì„±ì— ë”°ë¥¸ ë¼ìš°íŒ… ê·œì¹™ ì„¤ì • ë°©ë²•ì…ë‹ˆë‹¤:

```yaml
routing_rules:
  severity_based:
    critical:
      channels:
        - email
        - sms
        - slack
    warning:
      channels:
        - slack
    info:
      channels:
        - slack
      priority: low
  time_based:
    business_hours:
      channels:
        - slack
    after_hours:
      channels:
        - sms
        - email
```

## 5. ì•Œë¦¼ í…œí”Œë¦¿ ê´€ë¦¬

### ê¸°ë³¸ í…œí”Œë¦¿ êµ¬ì„±

ì•Œë¦¼ ë©”ì‹œì§€ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•œ í…œí”Œë¦¿ ì˜ˆì‹œì…ë‹ˆë‹¤:

```yaml
alert_template:
  title: "[${severity}] ${alertname} - ${instance}"
  content: |
    ğŸ”¥ Alert Triggered
    Severity: ${severity}
    Metric: ${metric}
    Current Value: ${value}
    Threshold: ${threshold}
    Time: ${time}
    Dashboard: ${dashboardURL}
```

### ì»¤ìŠ¤í…€ í…œí”Œë¦¿ í™œìš©

íŠ¹ì • ìƒí™©ì— ë§ëŠ” ì»¤ìŠ¤í…€ ì•Œë¦¼ í…œí”Œë¦¿ ì˜ˆì‹œì…ë‹ˆë‹¤:

```yaml
incident_template:
  title: "ğŸš¨ System Incident Detected"
  content: |
    Impact: ${impact}
    Required Action: ${action}
    Owner: ${owner}
    Escalation Path: ${escalation}
```

## 6. ì•Œë¦¼ ì‹œìŠ¤í…œ ìš´ì˜

### ì•Œë¦¼ ëª¨ë‹ˆí„°ë§

ì•Œë¦¼ ì‹œìŠ¤í…œ ìì²´ì˜ ìƒíƒœë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê¸° ìœ„í•œ ì§€í‘œì…ë‹ˆë‹¤:

ì²«ì§¸, ì•Œë¦¼ ë°œìƒ ë¹ˆë„ì™€ íŒ¨í„´ì„ ë¶„ì„í•©ë‹ˆë‹¤.

ë‘˜ì§¸, ì˜¤íƒ(False Positive) ë¹„ìœ¨ì„ ì¸¡ì •í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.

ì…‹ì§¸, ì•Œë¦¼ ì²˜ë¦¬ ì‹œê°„ê³¼ í•´ê²° ì‹œê°„ì„ ì¶”ì í•©ë‹ˆë‹¤.

### ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

ì•Œë¦¼ ì‹œìŠ¤í…œ ìš´ì˜ ì‹œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬¸ì œ í•´ê²° ë°©ë²•ì…ë‹ˆë‹¤:

ì²«ì§¸, ì•Œë¦¼ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ” ê²½ìš° ê·œì¹™ ì„¤ì •ê³¼ í‰ê°€ ê°„ê²©ì„ í™•ì¸í•©ë‹ˆë‹¤.

ë‘˜ì§¸, ì•Œë¦¼ì´ ì§€ì—°ë˜ëŠ” ê²½ìš° ë„¤íŠ¸ì›Œí¬ ì—°ê²°ê³¼ ì„œë²„ ë¶€í•˜ë¥¼ ì ê²€í•©ë‹ˆë‹¤.

ì…‹ì§¸, ì˜¤íƒì´ ë§ì€ ê²½ìš° ì„ê³„ê°’ê³¼ ì¡°ê±´ì‹ì„ ì¬ê²€í† í•©ë‹ˆë‹¤.

## 7. ì•Œë¦¼ ì‹œìŠ¤í…œ ìµœì í™”

### ì„±ëŠ¥ ìµœì í™”

ì•Œë¦¼ ì‹œìŠ¤í…œì˜ ì„±ëŠ¥ì„ ìµœì í™”í•˜ê¸° ìœ„í•œ ë°©ì•ˆì…ë‹ˆë‹¤:

ì²«ì§¸, ì ì ˆí•œ í‰ê°€ ê°„ê²©ì„ ì„¤ì •í•˜ì—¬ ì‹œìŠ¤í…œ ë¶€í•˜ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.

ë‘˜ì§¸, ì•Œë¦¼ ì¡°ê±´ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì„¤ê³„í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì²˜ë¦¬ë¥¼ ìµœì†Œí™”í•©ë‹ˆë‹¤.

ì…‹ì§¸, ì•Œë¦¼ ì±„ë„ì˜ ì²˜ë¦¬ ìš©ëŸ‰ì„ ê³ ë ¤í•˜ì—¬ êµ¬ì„±í•©ë‹ˆë‹¤.

### ìœ ì§€ë³´ìˆ˜ ê°€ì´ë“œ

ì•Œë¦¼ ì‹œìŠ¤í…œì˜ íš¨ê³¼ì ì¸ ìœ ì§€ë³´ìˆ˜ë¥¼ ìœ„í•œ ì§€ì¹¨ì…ë‹ˆë‹¤:

ì²«ì§¸, ì •ê¸°ì ìœ¼ë¡œ ì•Œë¦¼ ê·œì¹™ì„ ê²€í† í•˜ê³  ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

ë‘˜ì§¸, ì•Œë¦¼ ì±„ë„ì˜ ì—°ê²° ìƒíƒœë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤.

ì…‹ì§¸, ì•Œë¦¼ í…œí”Œë¦¿ì„ í˜„ì¬ ìš´ì˜ ìƒí™©ì— ë§ê²Œ ê°œì„ í•©ë‹ˆë‹¤.

## ë§ˆë¬´ë¦¬

Grafanaì˜ ì•Œë¦¼ ì‹œìŠ¤í…œì€ íš¨ê³¼ì ì¸ ëª¨ë‹ˆí„°ë§ í™˜ê²½ êµ¬ì¶•ì„ ìœ„í•œ í•µì‹¬ ìš”ì†Œì…ë‹ˆë‹¤. ì ì ˆí•œ ì•Œë¦¼ ê·œì¹™ ì„¤ì •ê³¼ ì±„ë„ êµ¬ì„±, ê·¸ë¦¬ê³  ì§€ì†ì ì¸ ìš´ì˜ ê´€ë¦¬ë¥¼ í†µí•´ ì‹œìŠ¤í…œì˜ ì•ˆì •ì„±ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ê°€ì´ë“œì—ì„œ ì„¤ëª…í•œ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ê° í™˜ê²½ì— ë§ëŠ” ìµœì ì˜ ì•Œë¦¼ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.