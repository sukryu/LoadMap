# Commentz-Walter 알고리즘

## 개요
Commentz-Walter 알고리즘은 다중 패턴 검색 문제를 해결하기 위해 Aho-Corasick 알고리즘과 Boyer-Moore 알고리즘의 아이디어를 결합한 효율적인 문자열 검색 기법입니다.  
이 알고리즘은 다수의 패턴을 하나의 텍스트 스캔으로 동시에 검색할 수 있으며, Boyer-Moore의 불일치 문자 규칙과 Aho-Corasick의 트라이 구조를 활용하여 빠른 건너뛰기와 효과적인 매칭을 수행합니다.

---

## 동작 원리
1. **패턴 트라이 구성:**  
   - 입력된 여러 패턴을 하나의 트라이(Trie) 자료구조에 삽입하여, 각 패턴의 접두사 정보를 통합합니다.
   - 각 노드는 패턴의 끝을 표시하고, 해당 위치에서 매칭된 패턴의 정보를 저장합니다.

2. **실패 함수 및 불일치 휴리스틱:**  
   - Aho-Corasick 알고리즘과 유사하게, 각 노드에 대해 실패 함수(failure function)를 계산하여, 매칭 실패 시 적절한 백트래킹 경로를 제공합니다.
   - 동시에, Boyer-Moore 알고리즘의 불일치 문자 규칙(bad character rule)을 적용해, 불일치가 발생한 경우 패턴을 빠르게 건너뛰는 간격을 결정합니다.

3. **텍스트 스캔 및 매칭:**  
   - 텍스트를 한 번만 스캔하면서, 트라이 내의 상태 전이와 실패 함수를 통해 패턴 매칭을 수행합니다.
   - 불일치 휴리스틱을 통해 불필요한 문자 비교를 최소화하며, 모든 매칭 결과를 동시에 검색합니다.

---

## 알고리즘 특징
- **시간 복잡도:**  
  평균적으로 텍스트 길이와 패턴의 총 문자 수에 비례한 성능을 보이며, 다중 패턴 검색에 매우 효율적입니다.
  
- **공간 복잡도:**  
  입력 패턴들의 총 문자 수에 비례하는 트라이와 추가 휴리스틱 테이블을 구성하므로, 메모리 사용량은 패턴의 규모에 따라 결정됩니다.
  
- **장점:**  
  - 한 번의 텍스트 스캔으로 다수의 패턴을 동시에 검색할 수 있어, 대용량 데이터에서 효율적입니다.
  - Boyer-Moore의 건너뛰기 기법을 통해 불필요한 비교를 크게 줄일 수 있습니다.
  
- **단점:**  
  - 초기 전처리 단계(트라이 구축 및 실패 함수, 휴리스틱 계산)가 복잡하며, 이로 인해 초기 오버헤드가 발생할 수 있습니다.
  - 패턴의 수가 매우 많거나 패턴 길이가 길 경우, 메모리 사용량이 증가할 수 있습니다.

---

## 활용 사례
- **콘텐츠 필터링:**  
  웹 필터링 및 이메일 스팸 검출에서, 다수의 금지어를 한 번에 검색하여 효과적으로 차단합니다.
  
- **보안 검사:**  
  바이러스 검사 및 악성 코드 탐지 시스템에서 다중 서명(Signature) 패턴을 동시에 검색하는 데 사용됩니다.
  
- **검색 엔진:**  
  여러 검색어를 동시에 처리하여 문서 내에서 빠른 검색 결과를 도출할 수 있습니다.

---

## 참고 자료
- [Wikipedia - Commentz-Walter algorithm](https://en.wikipedia.org/wiki/Commentz%E2%80%93Walter_algorithm)
- [GeeksforGeeks - Commentz-Walter Algorithm](https://www.geeksforgeeks.org/commentz-walter-algorithm-for-multiple-pattern-searching/)
- 관련 연구 논문 및 알고리즘 서적