# 세그먼트 트리 (Segment Tree) 🌲🔍

세그먼트 트리는 배열과 같은 선형 데이터에 대해 구간 합, 구간 최소/최대, 구간 기타 집계 등의 질의를  
효율적으로 수행할 수 있도록 도와주는 자료구조입니다.  
주로 쿼리와 업데이트가 빈번한 문제에서 사용되며, 각 질의와 업데이트가 O(log n) 시간에 처리됩니다.

---

## 목차 📝
1. [개요](#개요-🧐)
2. [세그먼트 트리의 정의와 특징](#세그먼트-트리의-정의와-특징-🔍)
3. [메모리 구조 및 다이어그램](#메모리-구조-및-다이어그램-🖼️)
4. [주요 연산](#주요-연산-🛠️)
5. [장단점](#장단점-⚖️)
6. [실무 활용 예시](#실무-활용-예시-💼)
7. [참고 자료](#참고-자료-🔗)

---

## 개요 🧐
세그먼트 트리는 주어진 배열에 대해 구간별 질의(range query)와 구간 업데이트(range update)를  
효율적으로 처리하기 위한 트리 기반 자료구조입니다.  
각 노드는 배열의 일정 구간에 대한 정보를 저장하며,  
이를 통해 전체 배열에 대해 다양한 구간 연산(예: 합, 최솟값, 최댓값 등)을 빠르게 계산할 수 있습니다.

---

## 세그먼트 트리의 정의와 특징 🔍
- **정의**:  
  세그먼트 트리는 배열의 각 구간(segment)에 대한 정보를 노드에 저장하는 완전 이진 트리입니다.
  
- **특징**:
  - **구간 질의 효율성**: 구간 합, 구간 최솟값/최댓값 등 질의를 O(log n)에 처리할 수 있습니다.
  - **동적 업데이트 지원**: 배열의 특정 원소가 변경되었을 때, 관련 구간의 정보를 갱신하는 데 O(log n)의 시간 복잡도를 가집니다.
  - **재귀적 분할**: 배열을 재귀적으로 반으로 분할하여 각 구간의 정보를 저장하므로, 전체 배열의 구간 질의에 최적화되어 있습니다.

---

## 메모리 구조 및 다이어그램 🖼️
세그먼트 트리는 배열의 인덱스 구간을 루트부터 리프까지 계층적으로 저장합니다.  
루트는 전체 배열 구간을 나타내며, 각 내부 노드는 구간을 절반씩 나눕니다.

```mermaid
flowchart TD
    A[전체 배열 구간<br>[0, n-1]]
    B[왼쪽 구간<br>[0, mid]]
    C[오른쪽 구간<br>[mid+1, n-1]]
    D[세부 구간1]
    E[세부 구간2]
    F[세부 구간3]
    G[세부 구간4]

    A --> B
    A --> C
    B --> D
    B --> E
    C --> F
    C --> G
```

이 다이어그램은 전체 배열 구간이 어떻게 재귀적으로 분할되어 각 노드에 저장되는지를 보여줍니다.

---

## 주요 연산 🛠️
- **빌드 (Build)**:  
  주어진 배열을 기반으로 세그먼트 트리를 구성합니다.  
  전체 트리 구성은 O(n) 시간에 이루어집니다.
  
- **구간 질의 (Range Query)**:  
  예를 들어, 구간 합, 구간 최솟값, 구간 최댓값 등의 질의를  
  트리의 관련 노드들을 통해 O(log n) 시간에 계산합니다.
  
- **업데이트 (Update)**:  
  배열의 특정 인덱스 값이 변경되면,  
  해당 값이 속한 구간 노드를 재계산하여 O(log n) 시간에 트리를 업데이트합니다.

---

## 장단점 ⚖️

### 장점 👍
- **빠른 질의 및 업데이트**: 모든 주요 연산이 O(log n) 시간에 수행됩니다.
- **구간 문제 최적화**: 다양한 구간 질의 문제에 대해 효과적인 해결책을 제공합니다.
- **유연성**: 합, 최솟값, 최댓값 등 다양한 연산에 맞게 노드의 정보를 저장할 수 있습니다.

### 단점 👎
- **메모리 사용량**: 배열 크기에 비해 약 4배 정도의 추가 메모리가 필요합니다.
- **구현 복잡성**: 재귀적 분할, 질의, 업데이트 로직 구현이 비교적 복잡할 수 있습니다.
- **고정 크기 배열**: 배열 기반으로 구현되기 때문에, 초기 배열 크기가 고정되어 있을 때 유리합니다.

---

## 실무 활용 예시 💼
- **데이터베이스 및 검색 엔진**:  
  특정 범위의 합, 최솟값/최댓값을 빠르게 계산해야 하는 경우.
- **게임 개발**:  
  실시간 통계 업데이트 및 구간 기반 이벤트 처리에 활용.
- **통계 분석 및 신호 처리**:  
  대량 데이터의 구간 질의 및 업데이트 연산 최적화에 사용됩니다.

---

## 참고 자료 🔗
- [세그먼트 트리 - Wikipedia](https://en.wikipedia.org/wiki/Segment_tree)
- [GeeksforGeeks - Segment Tree](https://www.geeksforgeeks.org/segment-tree-set-1-introduction/)
- [Baekjoon Online Judge](https://www.acmicpc.net/)

---

세그먼트 트리의 구조와 동작 원리를 이해하면,  
다양한 구간 질의 문제를 효율적으로 해결할 수 있습니다.  