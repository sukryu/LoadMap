# 펜윅 트리 (Fenwick Tree / Binary Indexed Tree) ⚡

펜윅 트리(Fenwick Tree)는 배열의 누적 합(prefix sum)과 업데이트를 효율적으로 처리할 수 있는 자료구조입니다.  
특히, 누적합 질의와 단일 원소 업데이트를 각각 O(log n) 시간에 처리할 수 있어, 많은 온라인 알고리즘 문제에서 유용하게 활용됩니다.

---

## 목차 📝
1. [개요](#개요-🧐)
2. [펜윅 트리의 정의와 특징](#펜윅-트리의-정의와-특징-🔍)
3. [메모리 구조 및 다이어그램](#메모리-구조-및-다이어그램-🖼️)
4. [주요 연산](#주요-연산-🛠️)
5. [장단점](#장단점-⚖️)
6. [실무 활용 예시](#실무-활용-예시-💼)
7. [참고 자료](#참고-자료-🔗)

---

## 개요 🧐
펜윅 트리는 배열의 각 원소에 대해 누적합을 빠르게 계산할 수 있도록 하는 트리 기반 자료구조입니다.  
일반 배열의 구간 합 계산은 O(n) 시간이 소요되지만, 펜윅 트리는  
업데이트와 질의를 모두 O(log n) 시간에 처리할 수 있어 효율적인 알고리즘 구현이 가능합니다.

---

## 펜윅 트리의 정의와 특징 🔍
- **정의**:  
  펜윅 트리는 1차원 배열의 정보를 이진 인덱스 트리 구조로 변환하여,  
  특정 인덱스까지의 누적합을 빠르게 계산할 수 있도록 지원합니다.

- **특징**:
  - **빠른 누적합 질의**: 배열의 1부터 i까지의 합을 O(log n)에 계산할 수 있습니다.
  - **효율적인 업데이트**: 배열의 특정 원소의 값을 업데이트할 때, 관련 누적합 정보만 O(log n) 시간에 갱신합니다.
  - **공간 효율성**: 원본 배열과 동일한 크기의 추가 배열을 사용하여 구현됩니다.
  - **단순 구현**: 재귀나 복잡한 자료구조 없이 반복문을 통해 비교적 간단하게 구현할 수 있습니다.

---

## 메모리 구조 및 다이어그램 🖼️
펜윅 트리는 보통 원본 배열과 동일한 크기의 보조 배열(BIT)을 사용합니다.  
각 인덱스 i의 BIT 값은 배열의 특정 구간의 합을 저장하며,  
이때 인덱스 i와 관련된 구간은 i의 이진 표현에서 마지막 1 비트에 의해 결정됩니다.

```mermaid
flowchart TD
    A[인덱스 1<br>(1)]
    B[인덱스 2<br>(1~2)]
    C[인덱스 3<br>(3)]
    D[인덱스 4<br>(1~4)]
    E[인덱스 5<br>(5)]
    F[인덱스 6<br>(5~6)]
    G[인덱스 7<br>(7)]
    H[인덱스 8<br>(1~8)]

    A --- B
    C --- B
    B --- D
    E --- F
    G --- F
    D --- H
```

위 다이어그램은 BIT 배열의 각 인덱스가 원본 배열의 어느 구간의 합을 나타내는지 간단하게 표현한 것입니다.

---

## 주요 연산 🛠️
- **빌드 (Build)**:  
  원본 배열을 기반으로 BIT 배열을 구성합니다. 초기 구성은 O(n log n) 또는 최적화된 방법으로 O(n)에 가능합니다.
  
- **누적합 질의 (Prefix Sum Query)**:  
  BIT를 사용하여 배열의 1부터 i까지의 누적합을 O(log n) 시간에 계산합니다.
  
- **업데이트 (Update)**:  
  원본 배열의 특정 인덱스 값을 변경할 때, BIT의 관련 원소들을 O(log n) 시간에 업데이트합니다.

---

## 장단점 ⚖️

### 장점 👍
- **시간 효율성**: 누적합 계산과 단일 원소 업데이트 모두 O(log n) 시간에 수행됩니다.
- **구현 용이성**: 비교적 간단한 반복문과 비트 연산으로 구현할 수 있습니다.
- **공간 효율성**: 원본 배열과 동일한 크기의 보조 배열을 사용하므로, 추가 공간이 크지 않습니다.

### 단점 👎
- **구간 업데이트 제한**: 단일 원소 업데이트와 누적합 질의에는 효율적이나, 일반적인 구간 업데이트는 추가 기법(예: Lazy Propagation) 없이는 처리하기 어렵습니다.
- **1차원 자료구조**: 2차원 이상의 누적합 문제에는 확장된 버전(2D BIT)이 필요합니다.

---

## 실무 활용 예시 💼
- **누적 빈도수 계산**: 데이터의 누적 빈도수 또는 합계를 빠르게 계산해야 하는 경우.
- **온라인 알고리즘 문제**: 구간 질의와 업데이트가 빈번한 문제 해결에 활용됩니다.
- **재무 및 통계 분석**: 실시간 데이터의 누적 합, 평균 계산 등에 사용될 수 있습니다.

---

## 참고 자료 🔗
- [Fenwick Tree - Wikipedia](https://en.wikipedia.org/wiki/Fenwick_tree)
- [GeeksforGeeks - Binary Indexed Tree](https://www.geeksforgeeks.org/binary-indexed-tree-or-fenwick-tree-2/)
- [Baekjoon Online Judge](https://www.acmicpc.net/)

---

펜윅 트리의 원리와 구현을 이해하면,  
실시간 누적합 질의나 단일 원소 업데이트 문제를 효율적으로 해결할 수 있습니다.